---
- name: Generate Inventory
  hosts: localhost
  connection: local
  gather_facts: false
  tasks:
    - name: Generate inventory file
      ansible.builtin.copy:
        content: "{{ lookup('template', playbook_dir + '/../templates/inventory.j2') }}"
        dest: "{{ lookup('env', 'GITHUB_WORKSPACE') | default('/workspace', true) }}/inventory.ini"
        mode: "0644"
